# 派生宏

## 简介

派生宏是一种特殊的宏，它允许开发者为自定义的数据类型自动实现 trait
特点：

1. 自动实现 trait：派生宏允许开发者为自定义的数据类型自动实现 trait，无需手动编写 trait 的实现代码。这样可以大大减少重复的代码，提高代码的可读性和可维护性。
2. 编译期间执行：派生宏的逻辑在编译期间执行，而不是运行时执行。这意味着 trait 的实现代码在编译时就已经确定，不会增加运行时的性能开销。
3. 代码安全性：派生宏生成的 trait 实现代码必须是合法的 Rust 代码，它们受到 Rust 编译器的类型检查和安全检查。这保证了派生宏生成的 trait 实现不会引入潜在的编译错误和安全漏洞。

### 派生宏的局限性

4. 虽然派生宏在 Rust 中非常强大，但它也有一些局限性需要注意：
5. trait 的限制：派生宏`只能自动实现由 Rust 标准库或第三方库定义的 trait`，`无法自动实现用户自定义的 trait`。
6. 复杂数据结构的支持：对于一些复杂的数据结构，特别是包含泛型参数或嵌套类型的数据结构，派生宏可能无法处理。
7. 代码生成的安全性：由于派生宏是在编译期间执行，生成的代码必须是合法的 Rust 代码。如果宏的处理逻辑出现错误，可能会导致编译错误或不符合预期的代码生成。
